(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{714:function(t,l,n){"use strict";n.r(l);var e=n(58),s=Object(e.a)({},(function(){var t=this,l=t.$createElement,n=t._self._c||l;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"移动端-scroll-组件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#移动端-scroll-组件"}},[t._v("#")]),t._v(" 移动端 scroll 组件")]),t._v(" "),n("p",[t._v("学习了黄轶老师的课程后，想要对better-scroll的应用进行总结。better-scroll是常用的移动端解决滚动需求的插件。 今天就利用它实现一个scroll的基础组件，可以解决获取滑动的实时位置、上拉加载、下拉刷新等功能。抽象出来的scroll组件以后可以用个各个项目中，功能可以根据better-scroll继续完善下去。")]),t._v(" "),n("ol",[n("li",[t._v("在src/base/scroll.vue")])]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("<template>\n\t<div ref=\"wrapper\">\n\t\t<slot></slot>\n\t</div>\n</template>\n<script>\nimport BScroll from 'better-scroll'\nexport default {\n\tprops: {\n\t\tdata: {   // data是scroll需要滚动的数据，data改变时需要触发refresh()刷新\n\t\t\ttype: Array,\n\t\t\tdefault: null\n\t\t},\n\t\tprobeType: { // 有时候我们需要知道滚动的位置。当 probeType 为 1 的时候，会非实时（屏幕滑动超过一定时间后）派发scroll 事件；当 probeType 为 2 的时候，会在屏幕滑动的过程中实时的派发 scroll 事件；当 probeType 为 3 的时候，不仅在屏幕滑动的过程中，而且在 momentum 滚动动画运行过程中实时派发 scroll 事件。\n\t\t\ttype: Number,\n\t\t\tdefault: 1\n\t\t},\n\t\tclick: { // false会阻止浏览器的原生 click 事件。当设置为 true，better-scroll 会派发一个 click 事件\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t},\n\t\tgetScrollPos:{ // 决定是否开启获得滚动的实时坐标\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t},\n\t\tpullingDown: { // 是否开启下拉刷新\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t},\n\t\tpullingUp: { // 是否开启上拉加载\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t}\n\t},\n\tmounted() { // 等dom结构渲染完成后再初始化scroll组件\n\t\tsetTimeout(() => {\n\t\t\tthis._initScroll()\n\t\t}, 20)\n\t},\n\tmethods: {\n\t\t_initScroll() {\n\t\t\tif(!this.$refs.wrapper) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\tthis.scroll = new BScroll(this.$ref.wrapper, {\n\t\t\t\tprobeType: this.probeType,\n\t\t\t\tclick: this.click\n\t\t\t})\n\t\t\tif(this.getScrollPos) {\n\t\t\t\tthis.scroll.on('scroll', (pos) => {\n\t\t\t\t\tthis.$emit('scroll', pos) // 暴露出实时滚动的位置{Object} {x, y}\n\t\t\t\t})\n\t\t\t}\n\t\t\tif(this.pullingDown) {\n\t\t\t\tthis.scroll.on('pullingDown', () => {\n\t\t\t\t\tthis.$emit('pullingDown') // 暴露出下拉刷新动作\n\t\t\t\t})\n\t\t\t}\n\t\t\tif(this.pullingUp) {\n\t\t\t\tthis.scroll.on('pullingUp', () => {\n\t\t\t\t\tthis.$emit('pullingUp') // 暴露出上拉加载动作\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\trefresh() { // 刷新scroll\n\t\t\tthis.scroll && this.scroll.refresh()\n\t\t},\n\t\tscrollTo() { // 滚动到指定位置\n\t\t\tthis.scroll && this.scroll.scrollTo.apply(this.scroll, arguments)\n\t\t},\n\t\tscrollToElement() { // 滚动到列表指定元素\n\t\t\tthis.scroll && this.scroll.scrollToElement(this.scroll, arguments)\n\t\t},\n\t}\n}\n<\/script>\n")])])]),n("ol",{attrs:{start:"2"}},[n("li",[t._v("在应用组件中使用：")])]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('<template>\n\t<Scroll :data="list" @scroll="scroll" @pullingDown="pullingDown" @pullingUp="pullingUp">\n\t\t<ul>\n\t\t\t<li v-for="(item, index) in list" :key="index">\n\t\t\t\t<div style="font-size: 20px">{{index}}。{{item}}</div>\n\t\t\t</li>\n\t\t</ul>\n\t</Scroll>\n</template>\n<script>\nimport Scroll from \'@/base/scroll\'\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\titem: "data是scroll需要滚动的数据，data改变时需要触发refresh()刷新",\n\t\t\tlist: []\n\t\t}\n\t},\n\tcreated() {\n\t\tfor(let i = 0; i<20; i++) {\n\t\t\tthis.list.push(this.item)\n\t\t}\n\t},\n\tmethods: {\n\t\tscroll(pos) {\n\t\t\tconsole.log(pos.x, pos.y)\n\t\t},\n\t\tpullingDown() {\n\t\t\tthis.list = []\n\t\t\tfor(leti = 0; i<20; i++) {\n\t\t\t\tthis.list.push(this.item)\n\t\t\t}\n\t\t},\n\t\tpullingUp() {\n\t\t\tfor(leti = 0; i<10; i++) {\n\t\t\t\tthis.list.push(this.item)\n\t\t\t}\n\t\t}\n\t},\n\tcomponents: {\n\t\tScroll\n\t}\n}\n<\/script>\n')])])]),n("p",[t._v("这篇文章转载于黄轶老师的，https://zhuanlan.zhihu.com/p/27407024")]),t._v(" "),n("p",[n("strong",[n("a",{attrs:{href:"https://github.com/Gesj-yean/vue-demo-collection",target:"_blank",rel:"noopener noreferrer"}},[t._v("如果想要demo的话，请前往我的github获取源码。"),n("OutboundLink")],1)])]),t._v(" "),n("p",[t._v("https://github.com/Gesj-yean/vue-demo-collection 记录了更多优秀插件的使用方法。有时间的同学请看我的置顶博客，可太感谢啦。")])])}),[],!1,null,null,null);l.default=s.exports}}]);