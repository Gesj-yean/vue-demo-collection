(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{717:function(t,e,n){"use strict";n.r(e);var s=n(58),a=Object(s.a)({},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"vue-评分组件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#vue-评分组件"}},[t._v("#")]),t._v(" Vue 评分组件")]),t._v(" "),n("star-index"),t._v(" "),n("star-index",{attrs:{size:"20"}}),t._v(" "),n("star-index",{attrs:{size:"28"}}),t._v(" "),n("star-index",{attrs:{size:"32",isShowNumber:!0}}),t._v(" "),n("p",[t._v("Vue 评分组件，支持以下参数传入：")]),t._v(" "),n("ul",[n("li",[t._v("评分（仅支持整数/x.5）")]),t._v(" "),n("li",[t._v("单颗星尺寸")]),t._v(" "),n("li",[t._v("总分（整数）")]),t._v(" "),n("li",[t._v("是否显示评分")]),t._v(" "),n("li",[t._v("是否开启进行评分")])]),t._v(" "),n("h2",{attrs:{id:"dom-结构"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#dom-结构"}},[t._v("#")]),t._v(" DOM 结构")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('\x3c!-- 评分组件 --\x3e\n<template>\n  <div class="star-wrapper" ref="star">\n    <div\n      class="star-item"\n      v-for="(item,index) in itemClass"\n      :key="index"\n      :class="item"\n      :style="`height:${size}px;width:${size}px`"\n      @click.prevent.stop="handleScore"\n    ></div>\n    <div class="number" v-show="isShowNumber">{{score}}</div>\n  </div>\n</template>\n')])])]),n("h2",{attrs:{id:"props-methods-computed"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#props-methods-computed"}},[t._v("#")]),t._v(" props / methods / computed")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("<script>\nexport default {\n  props: {\n    // 评分（仅支持整数/x.5）\n    score: {\n      type: Number,\n      default: 3.5,\n    },\n    // 单颗星尺寸\n    size: {\n      type: Number,\n      default: 16,\n    },\n    // 总分（整数）\n    totalScore: {\n      type: Number,\n      default: 5,\n    },\n    // 是否显示评分\n    isShowNumber: {\n      type: Boolean,\n      default: false,\n    },\n    // 是否开启进行评分\n    isEnable: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  computed: {\n    // 每颗星状态组成的数组\n    itemClass() {\n      const onLength = Math.floor(this.score)\n      const halfLength = Math.ceil(this.score % 1)\n      const offLength = this.totalScore - onLength - halfLength\n      let result = []\n      for (let i = 0; i < onLength; i++) {\n        result.push('on')\n      }\n      if (halfLength) result.push('half')\n      for (let i = 0; i < offLength; i++) {\n        result.push('off')\n      }\n      return result\n    },\n  },\n  methods: {\n    /** 响应点击评分 */\n    handleScore(e) {\n      if (!this.isEnable) return\n      this.$nextTick(() => {\n        const starDom = this.$refs.star.getBoundingClientRect() // 获取star组件dom信息\n        const itemWidth = starDom.width / this.totalScore // 获取单颗星宽度\n        const offsetX = e.pageX - starDom.x // 获取鼠标点击位置相对star组件x轴偏移\n        const on = Math.floor(offsetX / itemWidth)\n        const half = offsetX % itemWidth < itemWidth / 2 ? 0.5 : 1\n        const score = on + half\n        console.log(score)\n        this.$emit('getScore', score)\n      })\n    },\n  },\n}\n<\/script>\n")])])]),n("h2",{attrs:{id:"less-样式"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#less-样式"}},[t._v("#")]),t._v(" less 样式")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("<style lang=\"less\" scoped>\n.star-item {\n  display: inline-block;\n  margin-right: 6px;\n}\n.on {\n  background: url('./on.png');\n  background-size: cover;\n}\n.half {\n  background: url('./half.png');\n  background-size: cover;\n}\n.off {\n  background: url('./off.png');\n  background-size: cover;\n}\n</style>\n")])])])],1)}),[],!1,null,null,null);e.default=a.exports}}]);