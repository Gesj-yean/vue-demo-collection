<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>实现Vue 中可编辑的 SVG  Icon 组件 | Vue-Demo-Collection</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="A documentation of the excellent components encountered in VUE development">
    
    <link rel="preload" href="/vue-demo-collection/assets/css/0.styles.41da42df.css" as="style"><link rel="preload" href="/vue-demo-collection/assets/js/app.f5b96e8e.js" as="script"><link rel="preload" href="/vue-demo-collection/assets/js/7.ac4e68a0.js" as="script"><link rel="preload" href="/vue-demo-collection/assets/js/63.ab7ebef5.js" as="script"><link rel="prefetch" href="/vue-demo-collection/assets/js/1.2e2b4322.js"><link rel="prefetch" href="/vue-demo-collection/assets/js/10.6fe83197.js"><link rel="prefetch" href="/vue-demo-collection/assets/js/11.607bf541.js"><link rel="prefetch" href="/vue-demo-collection/assets/js/12.240a3ba2.js"><link rel="prefetch" href="/vue-demo-collection/assets/js/13.5f3ec41a.js"><link rel="prefetch" href="/vue-demo-collection/assets/js/14.c64dd16f.js"><link rel="prefetch" href="/vue-demo-collection/assets/js/15.04283614.js"><link rel="prefetch" href="/vue-demo-collection/assets/js/16.833af79b.js"><link rel="prefetch" href="/vue-demo-collection/assets/js/17.4daaa688.js"><link rel="prefetch" href="/vue-demo-collection/assets/js/18.088bf1a8.js"><link rel="prefetch" href="/vue-demo-collection/assets/js/19.b9758386.js"><link rel="prefetch" href="/vue-demo-collection/assets/js/2.2d5faf37.js"><link rel="prefetch" href="/vue-demo-collection/assets/js/20.3b799ac1.js"><link rel="prefetch" href="/vue-demo-collection/assets/js/21.ac51364b.js"><link rel="prefetch" href="/vue-demo-collection/assets/js/22.c44a5a8f.js"><link rel="prefetch" href="/vue-demo-collection/assets/js/23.75b8ffb8.js"><link rel="prefetch" href="/vue-demo-collection/assets/js/24.7553e43b.js"><link rel="prefetch" href="/vue-demo-collection/assets/js/25.cd523bbf.js"><link rel="prefetch" href="/vue-demo-collection/assets/js/26.b58a03fa.js"><link rel="prefetch" href="/vue-demo-collection/assets/js/27.e4741fa3.js"><link rel="prefetch" href="/vue-demo-collection/assets/js/28.9dbdb2e3.js"><link rel="prefetch" href="/vue-demo-collection/assets/js/29.1c444fa8.js"><link rel="prefetch" href="/vue-demo-collection/assets/js/3.da5e3f9c.js"><link rel="prefetch" href="/vue-demo-collection/assets/js/30.d656d726.js"><link rel="prefetch" href="/vue-demo-collection/assets/js/31.ae9630e4.js"><link rel="prefetch" href="/vue-demo-collection/assets/js/32.8a6fd8e6.js"><link rel="prefetch" href="/vue-demo-collection/assets/js/33.877edd59.js"><link rel="prefetch" href="/vue-demo-collection/assets/js/34.a357b142.js"><link rel="prefetch" href="/vue-demo-collection/assets/js/35.2d0c38e2.js"><link rel="prefetch" href="/vue-demo-collection/assets/js/36.18bacde9.js"><link rel="prefetch" href="/vue-demo-collection/assets/js/37.186a837c.js"><link rel="prefetch" href="/vue-demo-collection/assets/js/38.f2fc3138.js"><link rel="prefetch" href="/vue-demo-collection/assets/js/39.dabd2123.js"><link rel="prefetch" href="/vue-demo-collection/assets/js/4.20b3f9b2.js"><link rel="prefetch" href="/vue-demo-collection/assets/js/40.c511b4c2.js"><link rel="prefetch" href="/vue-demo-collection/assets/js/41.4cad3d23.js"><link rel="prefetch" href="/vue-demo-collection/assets/js/42.9136ea93.js"><link rel="prefetch" href="/vue-demo-collection/assets/js/43.9678c4e1.js"><link rel="prefetch" href="/vue-demo-collection/assets/js/44.09158630.js"><link rel="prefetch" href="/vue-demo-collection/assets/js/45.76503459.js"><link rel="prefetch" href="/vue-demo-collection/assets/js/46.756f2a47.js"><link rel="prefetch" href="/vue-demo-collection/assets/js/47.fa58ae45.js"><link rel="prefetch" href="/vue-demo-collection/assets/js/48.9b745272.js"><link rel="prefetch" href="/vue-demo-collection/assets/js/49.d1bf558f.js"><link rel="prefetch" href="/vue-demo-collection/assets/js/5.90b8032d.js"><link rel="prefetch" href="/vue-demo-collection/assets/js/50.ac5f466d.js"><link rel="prefetch" href="/vue-demo-collection/assets/js/51.38a211b6.js"><link rel="prefetch" href="/vue-demo-collection/assets/js/52.960e4db6.js"><link rel="prefetch" href="/vue-demo-collection/assets/js/53.73267aeb.js"><link rel="prefetch" href="/vue-demo-collection/assets/js/54.434a97c0.js"><link rel="prefetch" href="/vue-demo-collection/assets/js/55.57400b27.js"><link rel="prefetch" href="/vue-demo-collection/assets/js/56.e828cd7c.js"><link rel="prefetch" href="/vue-demo-collection/assets/js/57.794280cf.js"><link rel="prefetch" href="/vue-demo-collection/assets/js/58.e0e41a13.js"><link rel="prefetch" href="/vue-demo-collection/assets/js/59.374c4057.js"><link rel="prefetch" href="/vue-demo-collection/assets/js/60.a292140c.js"><link rel="prefetch" href="/vue-demo-collection/assets/js/61.d6e64963.js"><link rel="prefetch" href="/vue-demo-collection/assets/js/62.951cb72d.js"><link rel="prefetch" href="/vue-demo-collection/assets/js/64.ea299191.js"><link rel="prefetch" href="/vue-demo-collection/assets/js/65.35bb57b8.js"><link rel="prefetch" href="/vue-demo-collection/assets/js/66.96b69f7d.js"><link rel="prefetch" href="/vue-demo-collection/assets/js/67.9f43214c.js"><link rel="prefetch" href="/vue-demo-collection/assets/js/68.acad029f.js"><link rel="prefetch" href="/vue-demo-collection/assets/js/69.4dd36d2f.js"><link rel="prefetch" href="/vue-demo-collection/assets/js/70.8514f7a6.js"><link rel="prefetch" href="/vue-demo-collection/assets/js/71.a1e6d21e.js"><link rel="prefetch" href="/vue-demo-collection/assets/js/72.85e4760a.js"><link rel="prefetch" href="/vue-demo-collection/assets/js/73.82d83fb8.js"><link rel="prefetch" href="/vue-demo-collection/assets/js/74.94a16f58.js"><link rel="prefetch" href="/vue-demo-collection/assets/js/75.c1fdfff9.js"><link rel="prefetch" href="/vue-demo-collection/assets/js/76.6dbd6ea2.js"><link rel="prefetch" href="/vue-demo-collection/assets/js/77.431a65f0.js"><link rel="prefetch" href="/vue-demo-collection/assets/js/78.ffce0429.js"><link rel="prefetch" href="/vue-demo-collection/assets/js/79.a8b30c75.js"><link rel="prefetch" href="/vue-demo-collection/assets/js/8.7b37b1dc.js"><link rel="prefetch" href="/vue-demo-collection/assets/js/80.c5fc458b.js"><link rel="prefetch" href="/vue-demo-collection/assets/js/81.294e85c3.js"><link rel="prefetch" href="/vue-demo-collection/assets/js/9.7075ed80.js">
    <link rel="stylesheet" href="/vue-demo-collection/assets/css/0.styles.41da42df.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/vue-demo-collection/" class="home-link router-link-active"><img src="/vue-demo-collection/logo.png" alt="Vue-Demo-Collection" class="logo"> <span class="site-name can-hide">Vue-Demo-Collection</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/vue-demo-collection/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/vue-demo-collection/base/" class="nav-link">
  组件
</a></div><div class="nav-item"><a href="/vue-demo-collection/note/" class="nav-link">
  笔记
</a></div><div class="nav-item"><a href="/vue-demo-collection/essays/" class="nav-link router-link-active">
  随笔
</a></div><div class="nav-item"><a href="https://github.com/Gesj-yean/vue-demo-collection" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/vue-demo-collection/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/vue-demo-collection/base/" class="nav-link">
  组件
</a></div><div class="nav-item"><a href="/vue-demo-collection/note/" class="nav-link">
  笔记
</a></div><div class="nav-item"><a href="/vue-demo-collection/essays/" class="nav-link router-link-active">
  随笔
</a></div><div class="nav-item"><a href="https://github.com/Gesj-yean/vue-demo-collection" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><a href="/vue-demo-collection/essays/" class="sidebar-heading clickable router-link-active"><span>随笔</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/vue-demo-collection/essays/other/browser-compatibility.html" class="sidebar-link">浏览器兼容性记录2021-04-21 </a></li><li><a href="/vue-demo-collection/essays/other/new-begin.html" class="sidebar-link">前端装机必备教程</a></li><li><a href="/vue-demo-collection/essays/other/encapsulate-components.html" class="sidebar-link">前端如何修改组件库源码来封装符合自己需求的组件？</a></li><li><a href="/vue-demo-collection/essays/other/2021.html" class="sidebar-link">2021 年终总结</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/vue-demo-collection/essays/blog" class="sidebar-heading clickable router-link-active open"><span>其他</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/vue-demo-collection/essays/blog/line-text.html" class="sidebar-link">CSS: flex 实现中间文字，两边横线（1px）</a></li><li><a href="/vue-demo-collection/essays/blog/css-style.html" class="sidebar-link">CSS: 《CSS揭秘》可实用代码笔记</a></li><li><a href="/vue-demo-collection/essays/blog/ECMAScript2021.html" class="sidebar-link">ECMAScript 2021新特性</a></li><li><a href="/vue-demo-collection/essays/blog/table-checkbox-show-tooltip.html" class="sidebar-link">Element-ui: 多选表格，当复选框禁用，鼠标覆盖显示 tooltip</a></li><li><a href="/vue-demo-collection/essays/blog/page-exit-block.html" class="sidebar-link">Vue 拦截离开页面操作</a></li><li><a href="/vue-demo-collection/essays/blog/edit-svg.html" aria-current="page" class="active sidebar-link">Vue 中可编辑的 SVG  Icon 组件</a></li><li><a href="/vue-demo-collection/essays/blog/custom-vuepress.html" class="sidebar-link">VuePress 之自定义主题</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="实现vue-中可编辑的-svg-icon-组件"><a href="#实现vue-中可编辑的-svg-icon-组件" class="header-anchor">#</a> 实现Vue 中可编辑的 SVG  Icon 组件</h1> <p>当 <code>UI</code> 给了多个 <code>svg</code> 图标，前端需要根据不同条件渲染不同图标，并且图标的颜色要与周围文本的颜色一致，例如 <code>hover</code> 状态下图标与字体的颜色都由 <code>black</code> 改变为 <code>red</code>，这样的需求应该怎么实现？</p> <h2 id="关于封装-svg-图标基础组件"><a href="#关于封装-svg-图标基础组件" class="header-anchor">#</a> 关于封装 svg  图标基础组件</h2> <p>通常情况下，我们可以直接复制 <code>svg</code> 文件内容到 <code>template</code> 中，然后修改其 <code>fill</code> 的颜色。</p> <p>但这里我们需要对 <code>svg</code> 做一个封装，写成一个 <code>IconBase.vue</code> 文件如下（根据 <code>svg</code> 格式抽象的组件，保留 <code>&lt;svg&gt;</code>标签，<code>path</code>  部分抽象出来，封装成组件，动态引入）。</p> <h3 id="封装-iconbase-组件"><a href="#封装-iconbase-组件" class="header-anchor">#</a> 封装 <code>IconBase</code> 组件</h3> <p>封装后的 <code>IconBase</code> 组件支持传入:</p> <ul><li>名称 <code>iconName</code></li> <li>宽度 <code>width</code></li> <li>高度 <code>height</code></li> <li>颜色 <code>iconColor</code></li></ul> <div class="language- extra-class"><pre class="language-text"><code>&lt;template&gt;
  &lt;svg
    xmlns=&quot;http://www.w3.org/2000/svg&quot;
    :width=&quot;width&quot;
    :height=&quot;height&quot;
    viewBox=&quot;0 0 1024 1024&quot;
    :aria-labelledby=&quot;iconName&quot;
    role=&quot;presentation&quot;
  &gt;
    &lt;title :id=&quot;iconName&quot; lang=&quot;en&quot;&gt;{{iconName}} icon&lt;/title&gt;
    &lt;g :fill=&quot;iconColor&quot;&gt;
      &lt;!-- path 部分抽象出来，封装成组件，动态引入 --&gt;
      &lt;component v-bind:is=&quot;currentIcon&quot; /&gt;
    &lt;/g&gt;
  &lt;/svg&gt;
&lt;/template&gt;

&lt;script&gt;
import Vue from 'vue'
export default {
  props: {
    iconName: {
      type: String,
      default: 'box'
    },
    width: {
      type: [Number, String],
      default: 18
    },
    height: {
      type: [Number, String],
      default: 18
    },
    iconColor: {
      type: String,
      default: 'currentColor'
    }
  },
  data () {
    return {
      currentIcon: ''
    }
  },

  created () {
    this.getSvgIcon()
  },
  
  methods: {
    getSvgIcon () {
      try {
        this.registerComponent(this.iconName).then(component =&gt; {
          this.currentIcon = component
        })
      } catch (error) {
        // console.log(error)
      }
    },
    /**
      *@desc 统一加载注册组件资源
    */
    registerComponent (name) {
      const files = require.context('@/components/icons/', false, /\.vue$/)
      if (files.keys().includes(`./${name}.vue`)) {
        return import('@/components/icons/' + name).then(component =&gt; { //eslint-disable-line
          return Vue.extend(component.default)
        })
      } else {
        console.log('未找到icon组件')
      }
    }
  }
}
&lt;/script&gt;

&lt;style scoped&gt;
svg {
  display: inline-block;
  vertical-align: baseline;
  margin-bottom: -2px; /* yes, I'm that particular about formatting */
}
&lt;/style&gt;

</code></pre></div><p>这里动态加载组件资源的方法第二部分有解释。先接着说明抽象成动态组件后，组件到底是什么。</p> <h3 id="动态引入和抽象出的组件到底是什么"><a href="#动态引入和抽象出的组件到底是什么" class="header-anchor">#</a> 动态引入和抽象出的组件到底是什么？</h3> <p>由于 <code>IconBase.vue</code> 文件中是以动态组件的方式引入的，所以需要对 <code>svg</code> 文件做处理，以 <code>vue</code> 组件的方式引用，需要将用到的每一个 <code>svg</code> 文件封装成如下结构：</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;template&gt;
  &lt;path
    d=&quot;M484.266667 272.021333l6.634666 6.72c5.973333 5.973333 13.013333 12.842667 21.098667 20.629334l9.194667-8.917334c7.253333-7.04 13.44-13.184 18.56-18.432a193.28 193.28 0 0 1 277.44 0c75.904 77.525333 76.629333 202.794667 2.133333 281.194667L512 853.333333 204.672 553.237333c-74.474667-78.421333-73.770667-203.690667 2.133333-281.216a193.28 193.28 0 0 1 277.44 0z&quot;
  / &gt;
&lt;/template&gt;

</code></pre></div><p>同时需要注意的是最好将所有要用到的svg封装成的 vue 文件放在一个目录下，方便 <code>require.context()</code> 使用。</p> <h3 id="如何使用-iconbase-组件"><a href="#如何使用-iconbase-组件" class="header-anchor">#</a> 如何使用 <code>IconBase</code> 组件？</h3> <p>组件封装完成后，使用方法如下，这里的 <code>IconLike</code> 就是一个图标文件的文件名。</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;template&gt;
  &lt;div id=&quot;app&quot;&gt;
    &lt;icon-base icon-name=&quot;IconLike&quot;&gt;&lt;/icon-base&gt;111
  &lt;/div&gt;
&lt;/template&gt;
</code></pre></div><p>当添加 <code>hover</code> 样式后，图标颜色随着文本颜色变化：</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;style lang=&quot;stylus&quot; scoped&gt;
#app
  &amp;:hover
    color red
&lt;/style&gt;
</code></pre></div><h2 id="关于动态加载组件资源的说明"><a href="#关于动态加载组件资源的说明" class="header-anchor">#</a> 关于动态加载组件资源的说明</h2> <p>以上的例子中使用了动态加载组件的方式，这里详细说明一下动态加载组件的方法：</p> <p>这里使用了另外一个 <code>demo</code> 来说明，是之前做可视化大屏配置项目中使用到的。当选择 <code>echarts</code> 的一项配置标题组件 <code>title</code> ，下方就动态显示封装了 <code>title</code>  包含的所有配置项的表单组件。</p> <h3 id="先说说使用动态加载组件的原因"><a href="#先说说使用动态加载组件的原因" class="header-anchor">#</a> 先说说使用动态加载组件的原因</h3> <p>如图所示的功能改如何去做？第一想到的可能是<code>v-if</code>， <code>v-else-if</code>， <code>v-else</code>，但在条件多的时候会导致太冗余，页面看起来很复杂的问题。所以一方面为了简化代码，一方面为了减少手动 <code>import</code> 组件的步骤，我们使用动态加载组件。</p> <p><img src="https://user-gold-cdn.xitu.io/2020/6/29/172fe274172f319d?w=1462&amp;h=946&amp;f=png&amp;s=110704" alt=""></p> <h3 id="使用动态加载组件"><a href="#使用动态加载组件" class="header-anchor">#</a> 使用动态加载组件</h3> <p>那么如何做到根据选择的配置项显示对应的组件信息呢？ <code>vue</code> 中提供了 <code>vue.extend()</code> 方法以及 <code>is</code> 的使用。</p> <ul><li><code>is</code> 预期接收 <code>String| Object(组件的选项对象)</code> 。当 <code>currentView</code> 改变时，组件也跟着改变。点击 <a href="https://cn.vuejs.org/v2/api/#is" target="_blank" rel="noopener noreferrer">is 官网介绍<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 查看。</li></ul> <div class="language- extra-class"><pre class="language-text"><code>&lt;template&gt;
    &lt;component v-bind:is=&quot;currentView&quot;&gt;&lt;/component&gt;
&lt;/template&gt;
</code></pre></div><ul><li>同时我们需要 <code>Vue.extend(component.default)</code> 去实现加载注册组件资源。为了优化功能，这里还做了未找到文件的报错处理机制，防止未能 <code>import</code> 成功时的处理：</li></ul> <div class="language- extra-class"><pre class="language-text"><code>/**
  *@desc 响应下拉选择
  */
handleChangeApi (value) {
  try {
    this.registerComponent(value).then(component =&gt; {
      this.currentView = component
    })
  } catch (error) {
      // 未找到相应文件报错处理
  }
}
</code></pre></div><h3 id="使用-require-context-减少手动-import"><a href="#使用-require-context-减少手动-import" class="header-anchor">#</a> 使用 <code>require.context()</code> 减少手动 <code>import</code></h3> <p>这里使用到了 <code>require.context()</code>，可以去了解一下如何使用，这对于需要引入大量文件时比较有用。</p> <div class="language- extra-class"><pre class="language-text"><code>/**
  *@desc 用require.context()获取文件夹下所有文件，统一加载注册组件资源
  */
registerComponent (name) {
  const files = require.context('./form', false, /\.vue$/) 
  if (files.keys().includes(`./${name}.vue`)) {
    return import('./form/' + name).then(component =&gt; { 
      return Vue.extend(component.default)
    })
  } else {
    this.$message.error('配置项暂不支持')
  }
}
</code></pre></div><p>以上就是 <code>vue</code> 中动态组件的使用方法了。</p> <p>上述步骤就是 <code>Vue</code> 中动态使用 <code>SVG</code>  图标的说明。最后插入一个小经验，关于 <code>vue</code> 父组件向子组件如何传递图片变量。</p> <h2 id="其他代替方案"><a href="#其他代替方案" class="header-anchor">#</a> 其他代替方案</h2> <p>其它帮助你管理 SVG 图标的工具有：</p> <h3 id="vue-svg-icon"><a href="#vue-svg-icon" class="header-anchor">#</a> <a href="https://github.com/cenkai88/vue-svg-icon" target="_blank" rel="noopener noreferrer">vue-svg-icon<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h3> <h3 id="svg-sprite-loader"><a href="#svg-sprite-loader" class="header-anchor">#</a> <a href="https://github.com/JetBrains/svg-sprite-loader" target="_blank" rel="noopener noreferrer">svg-sprite-loader<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h3> <h3 id="svgo-loader"><a href="#svgo-loader" class="header-anchor">#</a> <a href="https://github.com/rpominov/svgo-loader" target="_blank" rel="noopener noreferrer">svgo-loader<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h3> <h2 id="vue父组件如何向子组件传递图片变量"><a href="#vue父组件如何向子组件传递图片变量" class="header-anchor">#</a> vue父组件如何向子组件传递图片变量？</h2> <p>通常我们会使用以下代码在 <code>vue</code> 中动态引入图片：</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;img :src=&quot;require('../../assets/happy.png')&quot; /&gt;
</code></pre></div><p>那如果我们想要在 <code>require</code> 中传变量可以吗？答案是不行。</p> <p>因为 <code>require</code> 的参数值必须是字符串直接量。当我们传一个变量进去，例如：<code>&lt;img :src=&quot;require(icon)&quot; alt /&gt;</code>，明明路径是正确的，但会报路径找不到的错误:</p> <p><img src="https://user-gold-cdn.xitu.io/2020/6/12/172a852c13119f3f?w=1324&amp;h=270&amp;f=png&amp;s=41190" alt=""></p> <h3 id="require-方法"><a href="#require-方法" class="header-anchor">#</a> <code>require</code> 方法</h3> <p>父组件直接 <code>require</code> 进图片传递， 注意：路径不能使用 <code>@/assets</code>，否则也会报错。</p> <div class="language- extra-class"><pre class="language-text"><code>// 父组件
&lt;template&gt;
    &lt;child :icon=&quot;require('../../assets/happy.png')&quot; /&gt;
&lt;/template&gt;

&lt;script&gt;
import child from './child'

export default {
  components: {
    child
  }
}
&lt;/script&gt;
</code></pre></div><h3 id="import-方法"><a href="#import-方法" class="header-anchor">#</a> <code>import</code> 方法</h3> <p>父组件需要将图片先 <code>import</code> 进来，再将图片作为参数传递给子组件，这个方法的好处是可以写成 <code>@/assets/happy.png</code> 格式：</p> <div class="language- extra-class"><pre class="language-text"><code>// 父组件
&lt;template&gt;
    &lt;child :icon=&quot;happy&quot; /&gt;
&lt;/template&gt;

&lt;script&gt;
import child from './child'
import happy from '@/assets/happy.png'

export default {
  components: {
    child
  },
  data () {
    return {
      happy
    }
  }
}
&lt;/script&gt;
</code></pre></div><p>两种方案的子组件写法相同， <code>img</code> 的 <code>src</code> 属性直接写变量就好：</p> <div class="language- extra-class"><pre class="language-text"><code>// 子组件
&lt;template&gt;
    &lt;img :src=&quot;icon&quot; alt /&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  props: {
    icon: {
      type: String,
      default: ''
    }
  },
}
&lt;/script&gt;

</code></pre></div><h3 id="element-ui-使用者戳这里-结合-icon-和-img-的兼容性写法"><a href="#element-ui-使用者戳这里-结合-icon-和-img-的兼容性写法" class="header-anchor">#</a> <code>element-ui</code> 使用者戳这里：结合 <code>icon</code> 和 <code>img</code> 的兼容性写法：</h3> <p>如果你是 <code>elementUI</code> 的使用者，可能会烦恼如果一个图标显示的既有可能是  <code>el-icon-edit</code>，也可能是 <code>img</code>，那我们是要用两个参数分别传递吗？</p> <p>当然不啦，为了使子组件更具兼容性，推荐父组件只传递一个参数。</p> <div class="language- extra-class"><pre class="language-text"><code>// 显示 img
&lt;child :icon=&quot;happy&quot; /&gt; &lt;!-- import happy from '@/assets/happy.png' --&gt;
// 显示 icon
&lt;child :icon=&quot;el-icon-eleme&quot; /&gt;  &lt;!-- const el-icon-eleme = 'el-icon-eleme' --&gt;
</code></pre></div><p>因为通过一个参数传递，所以在子组件中需要用正则 <code>/(.*)\.(png|jpg|jpeg|gif|bmp)$/</code> 和 <code>/^data:image\/[a-z]+;base64/</code> 判断一下类型：</p> <div class="language- extra-class"><pre class="language-text"><code>// 子组件
&lt;template&gt;
  &lt;div&gt;
    &lt;i v-if=&quot;isIcon&quot; :class=&quot;icon&quot;&gt;&lt;/i&gt;
    &lt;img v-else :src=&quot;icon&quot; /&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
const IMG_REG = /(.*)\.(png|jpg|jpeg|gif|bmp)$/
const SIMPLE_IMG_BASE_64_REG = /^data:image\/[a-z]+;base64/
export default {
  props: {
    icon: {
      type: String,
      default: ''
    }
  },
  computed: {
    isIcon () {
      return !IMG_REG.test(this.icon) &amp;&amp; !SIMPLE_IMG_BASE_64_REG.test(this.icon)
    }
  }
}
&lt;/script&gt;
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">1/21/2022, 5:24:06 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/vue-demo-collection/essays/blog/page-exit-block.html" class="prev">
        Vue 拦截离开页面操作
      </a></span> <span class="next"><a href="/vue-demo-collection/essays/blog/custom-vuepress.html">
        VuePress 之自定义主题
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/vue-demo-collection/assets/js/app.f5b96e8e.js" defer></script><script src="/vue-demo-collection/assets/js/7.ac4e68a0.js" defer></script><script src="/vue-demo-collection/assets/js/63.ab7ebef5.js" defer></script>
  </body>
</html>
